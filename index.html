<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Assistente Virtual - SEDAP</title>
</head>
<body>
  <h1>Assistente Virtual</h1>
  <p>Converse com nosso bot no canto da tela. As conversas são independentes por dispositivo.</p>

  <!-- CDN do Chat SDK, conforme sua tela de Publish -->
<script src="https://sf-cdn.coze.com/obj/unpkg-va/flow-platform/chat-app-sdk/1.2.0-beta.6/libs/oversea/index.js"></script>
<script>
  function getUniqueUserId() {
    let id = localStorage.getItem('cozeVisitorId');
    if (!id) {
      id = crypto.randomUUID();
      localStorage.setItem('cozeVisitorId', id);
    }
    return id;
  }

  new CozeWebSDK.WebChatClient({
    config: {
      bot_id: '7570014364363751432',
    },
    componentProps: {
      title: 'Assistente SEDAP',
    },
    auth: {
      type: 'token',
      token: 'pat_nOMe2AdxZGxCYGUrqDJFt65jsuDN3PleNl7H1Pemqr823RkZ413uNqizVN0LQg3M',
      onRefreshToken: function (oldToken) {
        // Algumas versões do SDK exigem a callback; aqui retornamos o mesmo PAT.
        return 'pat_nOMe2AdxZGxCYGUrqDJFt65jsuDN3PleNl7H1Pemqr823RkZ413uNqizVN0LQg3M';
      }
    },
    userInfo: {
      id: getUniqueUserId(),
      name: 'Visitante'
    }
  });
</script>

</body>
</html>

